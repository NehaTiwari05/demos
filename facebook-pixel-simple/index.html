<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Facebook Pixel Demo 1</title>

  <link rel="stylesheet" href="../lib/fb-pixel-styles/styles.css">
  <!-- Facebook Pixel Code -->
  <script data-pixel="fb">
    var optOutWish = function() {
      var doNotTrack = navigator.doNotTrack === '1';
      var hasOptedOut = localStorage.getItem('fb-pixel-status') === 'opt-out';
      return doNotTrack || hasOptedOut;
    }

    if (optOutWish()) {
      console.info('User prohibits tracking. Not embedding Facebook’s script.')
    } else {
      console.log('Embedding Facebook’s script.');
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1944570812537922');
      fbq('track', 'PageView');
    }
  </script>
    <!-- End Facebook Pixel Code -->
</head>
<body>
  <div class="dialog js-dialog" aria-hidden="false" role="dialog" aria-modal="true" aria-label="Hinweis" aria-describedby="dialogMessage">
    <p class="dialog__message js-dialog-message" id="dialogMessage">Diese Seite nutzt einen Facebook-Pixel. Sie können der Nutzung jederzeit durch einen Klick auf <a href="?fb-pixel-status=opt-out" class="js-fb-opt-out" title="Der Verwendung des Facebook Pixels widersprechen">Opt out</a> widersprechen.</p>
  </div>
  <main>
    <section>
      <button class="js-test-button">Event testen</button>
      <h3>Opt-Out-Status</h3>
      <p class="js-opt-out-status"></p>
      <h3>FB-Test-Output</h3>
      <ul class="js-test-output"></ul>
    </section>
    </main>
    <a href="https://www.netlify.com" class="icon">
      <img src="https://www.netlify.com/img/global/badges/netlify-light.svg"/>
    </a>
  <script src="../lib/FacebookPixelController/FacebookPixelController-min.js" async></script>
  <script src="js/main-min.js" async></script>
  <script>
    var paintStatus = function() {
      var optOut = optOutWish();
      var $status = document.querySelector('.js-opt-out-status');
      var text = optOut ? 'Pixel ist deaktiviert.' : 'Pixel ist aktiviert.';

      $status.innerText = text;
    }

    var init = function () {
      if (document.readyState === 'complete') {
          paintStatus();
      } else {
          setTimeout(function() {
              init();
          }, 50);
      }
    }

    init();
    </script>
</body>
</html>